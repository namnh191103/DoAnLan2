<!DOCTYPE html>
<html
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{layout}"
>
  <head>
    <title>Chi tiết sản phẩm</title>
  </head>
  <body>
    <div layout:fragment="content" class="container py-4">
      <div class="row g-4">
        <div class="col-md-5 text-center">
          <img
            th:src="${product.anhBia}"
            alt="Ảnh bìa"
            class="img-fluid rounded shadow-sm mb-3"
            style="max-height: 350px; object-fit: contain"
          />
          <div class="mb-2">
            <span
              class="badge bg-info me-2"
              th:if="${product.reviewCount != null}"
            >
              <i class="bi bi-chat-dots"></i>
              <span th:text="${product.reviewCount}"></span> đánh giá
            </span>
            <span
              class="badge bg-warning text-dark"
              th:if="${product.averageRating != null}"
            >
              <i class="bi bi-star-fill"></i>
              <span th:text="${product.averageRating}"></span>/5
            </span>
          </div>
        </div>
        <div class="col-md-7">
          <h2 th:text="${product.tuaDe}" class="mb-3"></h2>
          <div class="mb-2">
            <span
              class="fs-4 fw-bold text-danger"
              th:text="${#numbers.formatDecimal(product.giaBan, 0, 'COMMA', 0, 'POINT') + ' ₫'}"
            ></span>
            <span
              th:if="${product.phanTramGiamGia != null && product.phanTramGiamGia > 0}"
              class="badge bg-success ms-2"
            >
              -<span th:text="${product.phanTramGiamGia}"></span>%
            </span>
          </div>
          <div class="mb-2 text-muted" th:if="${product.ngayXuatBan != null}">
            <i class="bi bi-calendar-event"></i> Xuất bản:
            <span
              th:text="${#temporals.format(product.ngayXuatBan, 'dd/MM/yyyy')}"
            ></span>
          </div>
          <div class="mb-3">
            <strong>Kích thước:</strong>
            <span th:text="${product.lengthCm} ?: '-'" /> x
            <span th:text="${product.widthCm} ?: '-'" /> x
            <span th:text="${product.heightCm} ?: '-'" /> cm |
            <strong>Khối lượng:</strong>
            <span th:text="${product.weightKg} ?: '-'" /> kg
          </div>
          <div class="mb-3">
            <strong>Tóm tắt:</strong>
            <div th:text="${product.tomTat}"></div>
          </div>
          <div class="mb-3">
            <strong>Nội dung chi tiết:</strong>
            <div th:text="${product.noiDung}"></div>
          </div>
          <form
            th:action="@{/cart/add}"
            method="post"
            class="row g-2 align-items-end"
          >
            <input type="hidden" name="productId" th:value="${product.id}" />
            <div class="col-auto">
              <label for="quantity" class="form-label mb-0">Số lượng:</label>
              <input
                type="number"
                id="quantity"
                name="quantity"
                class="form-control"
                min="1"
                th:attr="max=${product.soLuongTon}"
                value="1"
                style="width: 90px"
                required
              />
            </div>
            <div class="col-auto">
              <button type="submit" class="btn btn-primary">
                <i class="bi bi-cart-plus"></i> Thêm vào giỏ hàng
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </body>
</html>
